/**
 * Ð“Ð»Ð°Ð²Ð½Ñ‹Ð¹ Ñ‚Ð¾Ñ‡ÐºÐ° Ð²Ñ…Ð¾Ð´Ð° Ð´Ð»Ñ Replit
 * 
 * Ð­Ñ‚Ð¾Ñ‚ Ñ„Ð°Ð¹Ð» Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ Ð¿Ñ€Ð¸ Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ð¸ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Run Ð² Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐµ Replit
 */

console.log('ðŸš€ Ð—Ð°Ð¿ÑƒÑÐº UniFarm Ñ‡ÐµÑ€ÐµÐ· main.js...');

// Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ child_process Ð´Ð»Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ° ÑÐºÑ€Ð¸Ð¿Ñ‚Ð°
import { spawn } from 'child_process';

// Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ð½Ð°Ñˆ Ð½Ð°Ð´ÐµÐ¶Ð½Ñ‹Ð¹ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð·Ð°Ð¿ÑƒÑÐºÐ°
const child = spawn('node', ['start.cjs'], {
  stdio: 'inherit'
});

// ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ°
child.on('close', (code) => {
  console.log(`âš ï¸ ÐŸÑ€Ð¾Ñ†ÐµÑÑ Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ð»ÑÑ Ñ ÐºÐ¾Ð´Ð¾Ð¼ ${code}, Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÐ¼ main.js Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¼`);
});

// Ð˜Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÐ¼ ÑÐ¸Ð³Ð½Ð°Ð»Ñ‹ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ
process.on('SIGINT', () => {
  console.log('âš ï¸ ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½ SIGINT, Ð¸Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÐ¼');
});

process.on('SIGTERM', () => {
  console.log('âš ï¸ ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½ SIGTERM, Ð¸Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÐ¼');
});

// ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ Ð½ÐµÐ¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð½Ñ‹Ðµ Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ
process.on('uncaughtException', (err) => {
  console.error('âŒ ÐÐµÐ¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð½Ð¾Ðµ Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ:', err);
  console.log('âœ… ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÐµÐ¼ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ');
});

// Ð˜Ð½Ñ‚ÐµÑ€Ð²Ð°Ð» Ð´Ð»Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ñ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ° Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¼
setInterval(() => {}, 1000);